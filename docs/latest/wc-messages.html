

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CSS-WC Message objects &mdash; pydvbcss 0.1.1-latest documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="pydvbcss 0.1.1-latest documentation" href="index.html"/>
        <link rel="up" title="CSS-WC protocol" href="wc.html"/>
        <link rel="next" title="CSS-WC Clients" href="wc-client.html"/>
        <link rel="prev" title="CSS-WC Protocol Introduction" href="wc-overview.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> pydvbcss</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="examples.html">Run the examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples.html#wallclockserver-py-and-wallclockclient-py"><strong>WallClockServer.py</strong> and <strong>WallClockClient.py</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#ciiserver-py-and-ciiclient-py"><strong>CIIServer.py</strong> and <strong>CIIClient.py</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#tsserver-py-and-tsclient-py"><strong>TSServer.py</strong> and <strong>TSClient.py</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#tvdevice-py"><strong>TVDevice.py</strong></a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="protocol.html">DVB CSS Protocol modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cii.html">CSS-CII protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="ts.html">CSS-TS protocol</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="wc.html">CSS-WC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocol.html#common-types-and-objects">Common types and objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="timing.html">Clocks, Time and Scheduling modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="monotonic_time.html">Montonic time functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="clock.html">Synthesised clocks (dvbcss.clock)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Task.html">Task scheduling for clocks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Internal implementation details</a><ul>
<li class="toctree-l2"><a class="reference internal" href="servers-internals.html">Protocol server implementation details</a></li>
<li class="toctree-l2"><a class="reference internal" href="task-internals.html">How the dvbcss.task module works internally</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">pydvbcss</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="protocol.html">DVB CSS Protocol modules</a> &raquo;</li>
      
          <li><a href="wc.html">CSS-WC protocol</a> &raquo;</li>
      
    <li>CSS-WC Message objects</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/wc-messages.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <span class="target" id="module-dvbcss.protocol.wc"></span><div class="section" id="css-wc-message-objects">
<h1>CSS-WC Message objects<a class="headerlink" href="#css-wc-message-objects" title="Permalink to this headline">¶</a></h1>
<p>Module: <cite>dvbcss.protocol.wc</cite></p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#example-usage" id="id1">Example usage</a></li>
<li><a class="reference internal" href="#classes" id="id2">Classes</a><ul>
<li><a class="reference internal" href="#wcmessage" id="id3">WCMessage</a></li>
<li><a class="reference internal" href="#candidate" id="id4">Candidate</a></li>
</ul>
</li>
</ul>
</div>
<p>The <a class="reference internal" href="#dvbcss.protocol.wc.WCMessage" title="dvbcss.protocol.wc.WCMessage"><tt class="xref py py-class docutils literal"><span class="pre">WCMessage</span></tt></a> class represents a CSS-WC protocol message.</p>
<p>The <a class="reference internal" href="#dvbcss.protocol.wc.Candidate" title="dvbcss.protocol.wc.Candidate"><tt class="xref py py-class docutils literal"><span class="pre">Candidate</span></tt></a> class represents a measurement &#8220;candidate&#8221;
for use by a Wall Clock Client algorithm and is calculated from a <a class="reference internal" href="#dvbcss.protocol.wc.WCMessage" title="dvbcss.protocol.wc.WCMessage"><tt class="xref py py-class docutils literal"><span class="pre">WCMessage</span></tt></a>
that represents a Wall Clock protocol response message received from a server.</p>
<div class="section" id="example-usage">
<h2><a class="toc-backref" href="#id1">Example usage</a><a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h2>
<p>Creating a request message at a Wall Clock Client:</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; from dvbcss.protocol.wc import WCMessage
&gt;&gt;&gt; import time

&gt;&gt;&gt; t1 = time.time() * 1000000000

&gt;&gt;&gt; msg = WCMessage(msgtype=WCMessage.TYPE_REQUEST, precision=-10, maxFreqError=256*50, originateNanos=t1, receiveNanos=0, transmitNanos=0)
&gt;&gt;&gt; packedMessage = msg.pack()
&gt;&gt;&gt; packedMessage
"\x00\x00\xf6\x00\x00\x002\x00TvH'3\xf5\xfc\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"</pre>
</div>
<p>Processing a received response message at a Wall Clock Client:</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; from dvbcss.protocol.wc import Candidate

&gt;&gt;&gt; t4 = &lt;nanoseconds-at-which-message-was-received&gt;
&gt;&gt;&gt; msg = WCMessage.unpack(receivedData)
&gt;&gt;&gt; msg.msgtype
1
&gt;&gt;&gt; c = Candidate(msg, t4)
&gt;&gt;&gt; c.rtt
459734573</pre>
</div>
</div>
<div class="section" id="classes">
<h2><a class="toc-backref" href="#id2">Classes</a><a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="wcmessage">
<h3><a class="toc-backref" href="#id3">WCMessage</a><a class="headerlink" href="#wcmessage" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="dvbcss.protocol.wc.WCMessage">
<em class="property">class </em><tt class="descclassname">dvbcss.protocol.wc.</tt><tt class="descname">WCMessage</tt><big>(</big><em>msgtype</em>, <em>precision</em>, <em>maxFreqError</em>, <em>originateNanos</em>, <em>receiveNanos</em>, <em>transmitNanos</em>, <em>originalOriginate=None</em><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>Create object representing a CSS-WC wall clock request or response message.</p>
<p><strong>Initialisation takes the following parameters:</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>msgtype</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Type of message. One of: <a class="reference internal" href="#dvbcss.protocol.wc.WCMessage.TYPE_REQUEST" title="dvbcss.protocol.wc.WCMessage.TYPE_REQUEST"><tt class="xref py py-data docutils literal"><span class="pre">TYPE_REQUEST</span></tt></a>, <a class="reference internal" href="#dvbcss.protocol.wc.WCMessage.TYPE_RESPONSE" title="dvbcss.protocol.wc.WCMessage.TYPE_RESPONSE"><tt class="xref py py-data docutils literal"><span class="pre">TYPE_RESPONSE</span></tt></a>, <a class="reference internal" href="#dvbcss.protocol.wc.WCMessage.TYPE_RESPONSE_WITH_FOLLOWUP" title="dvbcss.protocol.wc.WCMessage.TYPE_RESPONSE_WITH_FOLLOWUP"><tt class="xref py py-data docutils literal"><span class="pre">TYPE_RESPONSE_WITH_FOLLOWUP</span></tt></a> and <a class="reference internal" href="#dvbcss.protocol.wc.WCMessage.TYPE_FOLLOWUP" title="dvbcss.protocol.wc.WCMessage.TYPE_FOLLOWUP"><tt class="xref py py-data docutils literal"><span class="pre">TYPE_FOLLOWUP</span></tt></a></li>
<li><strong>precision</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Precision (of the server&#8217;s wall clock) encoded in log base 2 seconds between -128 and +127 inclusive.</li>
<li><strong>maxFreqError</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Maximum frequency error (of the server&#8217;s wall clock) in units of  1/256ths ppm.</li>
<li><strong>originateNanos</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Originate timevalue in integer number of nanoseconds</li>
<li><strong>receiveNanos</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Receive timevalue in integer number of nanoseconds</li>
<li><strong>transmitNanos</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Transmit timevalue in integer number of nanoseconds</li>
<li><strong>originalOriginate</strong> (<a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> or (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>, <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>)) &#8211; Optional original encoding of the originate timevalue as (seconds, nanos). Overrides <cite>originateNanos</cite> if not <cite>None</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The originalOriginate parameter, if not None, overrides the originateNanos parameter.</p>
<p>Convert to and from a string containing the binary encoding of this message
using the <a class="reference internal" href="#dvbcss.protocol.wc.WCMessage.pack" title="dvbcss.protocol.wc.WCMessage.pack"><tt class="xref py py-func docutils literal"><span class="pre">pack()</span></tt></a> method and <a class="reference internal" href="#dvbcss.protocol.wc.WCMessage.unpack" title="dvbcss.protocol.wc.WCMessage.unpack"><tt class="xref py py-func docutils literal"><span class="pre">unpack()</span></tt></a> class method.</p>
<dl class="attribute">
<dt id="dvbcss.protocol.wc.WCMessage.msgtype">
<tt class="descname">msgtype</tt><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.msgtype" title="Permalink to this definition">¶</a></dt>
<dd><p>(read/write <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>) Type of message. 0=request, 1=response, 2=response-with-followup, 3=followup</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.WCMessage.precision">
<tt class="descname">precision</tt><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.precision" title="Permalink to this definition">¶</a></dt>
<dd><p>(read/write <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>) Precision encoded in log base 2 seconds between -128 and +127 inclusive. For example: -10 encodes a precision value of roughly 0.001 seconds.</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.WCMessage.maxFreqError">
<tt class="descname">maxFreqError</tt><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.maxFreqError" title="Permalink to this definition">¶</a></dt>
<dd><p>(read/write <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>) Maximum frequency error in units of  1/256ths ppm. For example: 12800 encodes a max freq error of 50ppm.</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.WCMessage.originateNanos">
<tt class="descname">originateNanos</tt><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.originateNanos" title="Permalink to this definition">¶</a></dt>
<dd><p>(read/write <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>) Originate timevalue in integer number of nanoseconds</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.WCMessage.receiveNanos">
<tt class="descname">receiveNanos</tt><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.receiveNanos" title="Permalink to this definition">¶</a></dt>
<dd><p>(read/write <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>) Receive timevalue in integer number of nanosecond</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.WCMessage.transmitNanos">
<tt class="descname">transmitNanos</tt><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.transmitNanos" title="Permalink to this definition">¶</a></dt>
<dd><p>(read/write <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>) Transmit timevalue in integer number of nanosecond</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.WCMessage.originalOriginate">
<tt class="descname">originalOriginate</tt><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.originalOriginate" title="Permalink to this definition">¶</a></dt>
<dd><p>(read/write <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> or (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>, <a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></a>)) Optional original encoding of the originate timevalue as (seconds, nanos). Overrides <cite>originateNanos</cite> when the message is packed if the value is not <cite>None</cite>.</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.WCMessage.TYPE_FOLLOWUP">
<tt class="descname">TYPE_FOLLOWUP</tt><em class="property"> = 3</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.TYPE_FOLLOWUP" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant: Message type 3 &#8220;follow-up response&#8221;</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.WCMessage.TYPE_REQUEST">
<tt class="descname">TYPE_REQUEST</tt><em class="property"> = 0</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.TYPE_REQUEST" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant: Message type 0 &#8220;request&#8221;</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.WCMessage.TYPE_RESPONSE">
<tt class="descname">TYPE_RESPONSE</tt><em class="property"> = 1</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.TYPE_RESPONSE" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant: Message type 1 &#8220;response with no follow-up&#8221;</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.WCMessage.TYPE_RESPONSE_WITH_FOLLOWUP">
<tt class="descname">TYPE_RESPONSE_WITH_FOLLOWUP</tt><em class="property"> = 2</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.TYPE_RESPONSE_WITH_FOLLOWUP" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant: Message type 2 &#8220;response to be followed by a follow-up response&#8221;</p>
</dd></dl>

<dl class="method">
<dt id="dvbcss.protocol.wc.WCMessage.copy">
<tt class="descname">copy</tt><big>(</big><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Duplicate this wallclock message object</p>
</dd></dl>

<dl class="classmethod">
<dt id="dvbcss.protocol.wc.WCMessage.encodePrecision">
<em class="property">classmethod </em><tt class="descname">encodePrecision</tt><big>(</big><em>precisionSecs</em><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.encodePrecision" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a precision value in seconds to the format used in these messages</p>
</dd></dl>

<dl class="method">
<dt id="dvbcss.protocol.wc.WCMessage.getMaxFreqError">
<tt class="descname">getMaxFreqError</tt><big>(</big><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.getMaxFreqError" title="Permalink to this definition">¶</a></dt>
<dd><p>Get frequency error in ppm</p>
</dd></dl>

<dl class="method">
<dt id="dvbcss.protocol.wc.WCMessage.getPrecision">
<tt class="descname">getPrecision</tt><big>(</big><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.getPrecision" title="Permalink to this definition">¶</a></dt>
<dd><p>Get precision value in fractions of a second</p>
</dd></dl>

<dl class="method">
<dt id="dvbcss.protocol.wc.WCMessage.pack">
<tt class="descname">pack</tt><big>(</big><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.pack" title="Permalink to this definition">¶</a></dt>
<dd><p>Pack wall clock message into binary representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">String containing the wall clock message in final bitstream form.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dvbcss.protocol.wc.WCMessage.setMaxFreqError">
<tt class="descname">setMaxFreqError</tt><big>(</big><em>maxFreqErrorPpm</em><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.setMaxFreqError" title="Permalink to this definition">¶</a></dt>
<dd><p>Set freq error given a freq error represented as ppm</p>
</dd></dl>

<dl class="method">
<dt id="dvbcss.protocol.wc.WCMessage.setPrecision">
<tt class="descname">setPrecision</tt><big>(</big><em>precisionSecs</em><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.setPrecision" title="Permalink to this definition">¶</a></dt>
<dd><p>Set precision value given a precision represented as factions of a second</p>
</dd></dl>

<dl class="classmethod">
<dt id="dvbcss.protocol.wc.WCMessage.unpack">
<em class="property">classmethod </em><tt class="descname">unpack</tt><big>(</big><em>data</em><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.WCMessage.unpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Class method that takes a string containing a wall clock message and unpacks
it to a <a class="reference internal" href="#dvbcss.protocol.wc.WCMessage" title="dvbcss.protocol.wc.WCMessage"><tt class="xref py py-class docutils literal"><span class="pre">WCMessage</span></tt></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; String containing binary representation of a Wall Clock message as received from a client or server.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference internal" href="#dvbcss.protocol.wc.WCMessage" title="dvbcss.protocol.wc.WCMessage"><tt class="xref py py-class docutils literal"><span class="pre">WCMessage</span></tt></a> object representing the wall clock message.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="candidate">
<h3><a class="toc-backref" href="#id4">Candidate</a><a class="headerlink" href="#candidate" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="class">
<dt id="dvbcss.protocol.wc.Candidate">
<em class="property">class </em><tt class="descclassname">dvbcss.protocol.wc.</tt><tt class="descname">Candidate</tt><big>(</big><em>msg</em>, <em>nanosRx</em><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate" title="Permalink to this definition">¶</a></dt>
<dd><p>This object represents a measurement &#8220;candidate&#8221; to be fed into a Wall Clock Client&#8217;s
algorithm. It is calculated from a <a class="reference internal" href="#dvbcss.protocol.wc.WCMessage" title="dvbcss.protocol.wc.WCMessage"><tt class="xref py py-class docutils literal"><span class="pre">WCMessage</span></tt></a> received as a response from a
Wall Clock server.</p>
<p><strong>Initialisation takes the following parameters:</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>msg</strong> (<a class="reference internal" href="#dvbcss.protocol.wc.WCMessage" title="dvbcss.protocol.wc.WCMessage"><tt class="xref py py-class docutils literal"><span class="pre">WCMessage</span></tt></a>) &#8211; Response message received from server</li>
<li><strong>nanosRx</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; the time, in nanoseconds, at which it was received (from the server)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Pass in a received WallClockMessage that is a response and this will represent the
candidate data derived from that request-response interaction.</p>
<p>Populates properties of this objects with the candidate information.
<a class="reference internal" href="#dvbcss.protocol.wc.Candidate.t1" title="dvbcss.protocol.wc.Candidate.t1"><tt class="xref py py-data docutils literal"><span class="pre">t1</span></tt></a>, <a class="reference internal" href="#dvbcss.protocol.wc.Candidate.t2" title="dvbcss.protocol.wc.Candidate.t2"><tt class="xref py py-data docutils literal"><span class="pre">t2</span></tt></a>, <a class="reference internal" href="#dvbcss.protocol.wc.Candidate.t3" title="dvbcss.protocol.wc.Candidate.t3"><tt class="xref py py-data docutils literal"><span class="pre">t3</span></tt></a> and <a class="reference internal" href="#dvbcss.protocol.wc.Candidate.t4" title="dvbcss.protocol.wc.Candidate.t4"><tt class="xref py py-data docutils literal"><span class="pre">t4</span></tt></a> represent the times of message sending
and receiving as shown below:</p>
<a class="reference internal image-reference" href="_images/wc-request-response.png"><img alt="_images/wc-request-response.png" class="align-center" src="_images/wc-request-response.png" style="width: 128pt;" /></a>
<p>It also calculates and provides, as properties, the round-trip time (<a class="reference internal" href="#dvbcss.protocol.wc.Candidate.rtt" title="dvbcss.protocol.wc.Candidate.rtt"><tt class="xref py py-data docutils literal"><span class="pre">rtt</span></tt></a>)
and clock offset estimate (<a class="reference internal" href="#dvbcss.protocol.wc.Candidate.offset" title="dvbcss.protocol.wc.Candidate.offset"><tt class="xref py py-data docutils literal"><span class="pre">offset</span></tt></a>) based on this measurement.</p>
<p>By default the data is preserved in nanoseconds. However you may use the <a class="reference internal" href="#dvbcss.protocol.wc.Candidate.toTicks" title="dvbcss.protocol.wc.Candidate.toTicks"><tt class="xref py py-func docutils literal"><span class="pre">toTicks()</span></tt></a>
method to create a new version of the Candidate object using units of ticks matching
a <a class="reference internal" href="clock.html#module-dvbcss.clock" title="dvbcss.clock"><tt class="xref py py-mod docutils literal"><span class="pre">clock</span></tt></a> object you provide.</p>
<p>The exceptions are precision which is measured in seconds, and
maximum frequency error which is measured in ppm</p>
<dl class="attribute">
<dt id="dvbcss.protocol.wc.Candidate.t1">
<tt class="descname">t1</tt><em class="property"> = msg.originateNanos</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate.t1" title="Permalink to this definition">¶</a></dt>
<dd><p>(read only) The time &#8220;t1&#8221; at which the request was sent in the request-response measurement (nanoseconds, or clock ticks)</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.Candidate.t2">
<tt class="descname">t2</tt><em class="property"> = msg.receiveNanos</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate.t2" title="Permalink to this definition">¶</a></dt>
<dd><p>(read only) The time &#8220;t2&#8221; at which the request was received in the request-response measurement (nanoseconds, or clock ticks)</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.Candidate.t3">
<tt class="descname">t3</tt><em class="property"> = msg.transmitNanos</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate.t3" title="Permalink to this definition">¶</a></dt>
<dd><p>(read only) The time &#8220;t3&#8221; at which the response was sent in the request-response measurement (nanoseconds, or clock ticks)</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.Candidate.t4">
<tt class="descname">t4</tt><em class="property"> = nanosRx</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate.t4" title="Permalink to this definition">¶</a></dt>
<dd><p>(read only) The time &#8220;t4&#8221; at which the response was received in the request-response measurement (nanoseconds, or clock ticks)</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.Candidate.offset">
<tt class="descname">offset</tt><em class="property"> = ((t3+t2)-(t4+t1))/2</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>(read only) Server&lt;-&gt;client clock offset (nanoseconds, or clock ticks)</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.Candidate.rtt">
<tt class="descname">rtt</tt><em class="property"> = (t4-t1)-(t3-t2)</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate.rtt" title="Permalink to this definition">¶</a></dt>
<dd><p>(read only) Round trip time (nanoseconds, or clock ticks)</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.Candidate.isNanos">
<tt class="descname">isNanos</tt><em class="property"> = True</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate.isNanos" title="Permalink to this definition">¶</a></dt>
<dd><p>(read only <a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">bool</span></tt></a>) True if this candidate object is in units of nanoseconds for t1, t2, t3, t4, offset and rtt</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.Candidate.precision">
<tt class="descname">precision</tt><em class="property"> = msg.getPrecision()</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate.precision" title="Permalink to this definition">¶</a></dt>
<dd><p>(read only) The precision reported by the server in its response (units of factions of a second)</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.Candidate.maxFreqError">
<tt class="descname">maxFreqError</tt><em class="property"> = msg.getMaxFreqError()</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate.maxFreqError" title="Permalink to this definition">¶</a></dt>
<dd><p>(read only) The maximum frequency error reported by the server in its response (units of ppm)</p>
</dd></dl>

<dl class="attribute">
<dt id="dvbcss.protocol.wc.Candidate.msg">
<tt class="descname">msg</tt><em class="property"> = WCMessage</em><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate.msg" title="Permalink to this definition">¶</a></dt>
<dd><p>(read only <a class="reference internal" href="#dvbcss.protocol.wc.WCMessage" title="dvbcss.protocol.wc.WCMessage"><tt class="xref py py-class docutils literal"><span class="pre">WCMessage</span></tt></a>) The response message from which this candidate was derived</p>
</dd></dl>

<dl class="method">
<dt id="dvbcss.protocol.wc.Candidate.toTicks">
<tt class="descname">toTicks</tt><big>(</big><em>clock</em><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/protocol/wc.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.protocol.wc.Candidate.toTicks" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new Candidate object the same as this one but whose measurements have been converted to match the timescale of a clock.</p>
<p><cite>t1</cite>, <cite>t2</cite>, <cite>t3</cite>, <cite>t4</cite>, rtt and <cite>offset</cite> of the returned object are converted to units of ticks matching the clock.
But <cite>precision</cite> and <cite>maxFreqError</cite> remain unchanged.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>clock</strong> (<a class="reference internal" href="clock.html#module-dvbcss.clock" title="dvbcss.clock"><em>dvbcss.clock</em></a>) &#8211; Clock whose <a class="reference internal" href="clock.html#dvbcss.clock.ClockBase.nanosToTicks" title="dvbcss.clock.ClockBase.nanosToTicks"><tt class="xref py py-func docutils literal"><span class="pre">nanosToTicks()</span></tt></a> function will be used to create the new candidate object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a copy of this candidate where the units have been converted to &#8216;ticks&#8217; according to the tick rate of the supplied clock.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="wc-client.html" class="btn btn-neutral float-right" title="CSS-WC Clients"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="wc-overview.html" class="btn btn-neutral" title="CSS-WC Protocol Introduction"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, British Broadcasting Corporation.
      Last updated on Feb 18, 2015.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.1-latest',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>