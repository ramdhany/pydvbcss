

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Montonic time functions &mdash; pydvbcss 0.2-release documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="pydvbcss 0.2-release documentation" href="index.html"/>
        <link rel="up" title="Clocks, Time and Scheduling modules" href="timing.html"/>
        <link rel="next" title="Synthesised clocks (dvbcss.clock)" href="clock.html"/>
        <link rel="prev" title="Clocks, Time and Scheduling modules" href="timing.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> pydvbcss</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="examples.html">Run the examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples.html#wallclockserver-py-and-wallclockclient-py"><strong>WallClockServer.py</strong> and <strong>WallClockClient.py</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#ciiserver-py-and-ciiclient-py"><strong>CIIServer.py</strong> and <strong>CIIClient.py</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#tsserver-py-and-tsclient-py"><strong>TSServer.py</strong> and <strong>TSClient.py</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#tvdevice-py"><strong>TVDevice.py</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="protocol.html">DVB CSS Protocol modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cii.html">CSS-CII protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="ts.html">CSS-TS protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="wc.html">CSS-WC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocol.html#common-types-and-objects">Common types and objects</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="timing.html">Clocks, Time and Scheduling modules</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Montonic time functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="clock.html">Synthesised clocks (dvbcss.clock)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Task.html">Task scheduling for clocks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Internal implementation details</a><ul>
<li class="toctree-l2"><a class="reference internal" href="servers-internals.html">Protocol server implementation details</a></li>
<li class="toctree-l2"><a class="reference internal" href="task-internals.html">How the dvbcss.task module works internally</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">pydvbcss</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="timing.html">Clocks, Time and Scheduling modules</a> &raquo;</li>
      
    <li>Montonic time functions</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/monotonic_time.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <span class="target" id="module-dvbcss.monotonic_time"></span><div class="section" id="montonic-time-functions">
<h1>Montonic time functions<a class="headerlink" href="#montonic-time-functions" title="Permalink to this headline">¶</a></h1>
<p>Module: <cite>dvbcss.monotonic_time</cite></p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#example-use" id="id2">Example use</a></li>
<li><a class="reference internal" href="#operating-system-implementation-details" id="id3">Operating system implementation details</a><ul>
<li><a class="reference internal" href="#windows" id="id4">Windows</a></li>
<li><a class="reference internal" href="#mac-os-x" id="id5">Mac OS X</a></li>
<li><a class="reference internal" href="#linux" id="id6">Linux</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functions" id="id7">Functions</a><ul>
<li><a class="reference internal" href="#time-timemicros-and-timenanos" id="id8">time(), timeMicros() and timeNanos()</a></li>
<li><a class="reference internal" href="#sleep" id="id9">sleep()</a></li>
</ul>
</li>
</ul>
</div>
<p>This module implements operating system specific access to high resolution
monotonic system timers for the following operating systems:</p>
<blockquote>
<div><ul class="simple">
<li>Windows 2000 Pro or later</li>
<li>Linux</li>
<li>Mac OS X</li>
</ul>
</div></blockquote>
<p>It implements a <a class="reference internal" href="#dvbcss.monotonic_time.time" title="dvbcss.monotonic_time.time"><tt class="xref py py-func docutils literal"><span class="pre">time()</span></tt></a> function and <a class="reference internal" href="#dvbcss.monotonic_time.sleep" title="dvbcss.monotonic_time.sleep"><tt class="xref py py-func docutils literal"><span class="pre">sleep()</span></tt></a> function that work
the same as the <a class="reference external" href="http://docs.python.org/library/time.html#time.time" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">time.time()</span></tt></a> and <a class="reference external" href="http://docs.python.org/library/time.html#time.sleep" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">time.sleep()</span></tt></a> functions in the
python standard library.</p>
<p>It also adds a <a class="reference internal" href="#dvbcss.monotonic_time.timeNanos" title="dvbcss.monotonic_time.timeNanos"><tt class="xref py py-func docutils literal"><span class="pre">timeNanos()</span></tt></a> and <a class="reference internal" href="#dvbcss.monotonic_time.timeMicros" title="dvbcss.monotonic_time.timeMicros"><tt class="xref py py-func docutils literal"><span class="pre">timeMicros()</span></tt></a> variants that report
time in units of nanoseconds or microseconds instead of seconds.</p>
<p>See operating system specific implementation details below to understand
the limitations of the functions provided in this module.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For all supported operating systems, the sleep() function is not guaranteed
to use the same underlying timer as the time() and therefore should be
considered inaccurate.</p>
</div>
<div class="section" id="example-use">
<h2><a class="toc-backref" href="#id2">Example use</a><a class="headerlink" href="#example-use" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>&gt;&gt;&gt; import dvbcss.monotonic_time as monotonic_time
&gt;&gt;&gt; monotonic_time.time()
4695.582637038
&gt;&gt;&gt; monotonic_time.timeNanos()
4700164952506L
&gt;&gt;&gt; monotonic_time.timeMicros()
4703471405L
&gt;&gt;&gt; monotonic_time.sleep(0.5)   # sleep 1/2 second</pre>
</div>
</div>
<div class="section" id="operating-system-implementation-details">
<h2><a class="toc-backref" href="#id3">Operating system implementation details</a><a class="headerlink" href="#operating-system-implementation-details" title="Permalink to this headline">¶</a></h2>
<p>The precision and accuracy of the clocks and sleep functions are dependent on
the host operating system and hardware. This module can therefore provide no
performance guarantees.</p>
<div class="section" id="windows">
<h3><a class="toc-backref" href="#id4">Windows</a><a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p>Windows NT 5.0 (Windows 2000 Professional) or later is supported, including
the cygwin environment.</p>
<p>The <a class="reference internal" href="#dvbcss.monotonic_time.time" title="dvbcss.monotonic_time.time"><tt class="xref py py-func docutils literal"><span class="pre">time()</span></tt></a> function and its variants are based on the 
<a class="reference external" href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904.aspx">QueryPerformanceCounter()</a>
high resolution timer system call.
This clock is guaranteed to be monotonic and have 1 microsecond precision or better.</p>
<p>The <a class="reference internal" href="#dvbcss.monotonic_time.sleep" title="dvbcss.monotonic_time.sleep"><tt class="xref py py-func docutils literal"><span class="pre">sleep()</span></tt></a> function is based on the
<a class="reference external" href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms687008.aspx">CreateWaitableTimer() and SetWaitableTimer()</a>
system calls.</p>
<p>Note that the <a class="reference internal" href="#dvbcss.monotonic_time.sleep" title="dvbcss.monotonic_time.sleep"><tt class="xref py py-func docutils literal"><span class="pre">sleep()</span></tt></a> function for Windows is not guaranteed to be accurate
because it is not possible to create blocking (non polling) delays
based on the clock source used. However it should have significantly
higher precision than the standard 15ms windows timers and will be fine
for short delays.</p>
</div>
<div class="section" id="mac-os-x">
<h3><a class="toc-backref" href="#id5">Mac OS X</a><a class="headerlink" href="#mac-os-x" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#dvbcss.monotonic_time.time" title="dvbcss.monotonic_time.time"><tt class="xref py py-func docutils literal"><span class="pre">time()</span></tt></a> function and its variants are based on the
<a class="reference external" href="https://developer.apple.com/library/mac/qa/qa1398/_index.html">mach_absolute_time()</a>
system call.</p>
<p>The clock is guaranteed to be monotonic. Apple provides no guarantees on precision,
however in practice it is usually based on hardware tick counters in the processor or
support chips and so is extremely high precision (microseconds or better).</p>
<p>The <a class="reference internal" href="#dvbcss.monotonic_time.sleep" title="dvbcss.monotonic_time.sleep"><tt class="xref py py-func docutils literal"><span class="pre">sleep()</span></tt></a> function is based on the
<a class="reference external" href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man2/nanosleep.2.html">nanosleep()</a>
system call. It is unclear whether this uses the same underlying counter as <cite>mach_absolute_time()</cite>.</p>
</div>
<div class="section" id="linux">
<h3><a class="toc-backref" href="#id6">Linux</a><a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#dvbcss.monotonic_time.time" title="dvbcss.monotonic_time.time"><tt class="xref py py-func docutils literal"><span class="pre">time()</span></tt></a> function and its variants are based on the
<a class="reference external" href="http://linux.die.net/man/3/clock_gettime">clock_gettime()</a>
system call requesting <cite>CLOCK_MONOTONIC</cite>.</p>
<p>The <a class="reference internal" href="#dvbcss.monotonic_time.sleep" title="dvbcss.monotonic_time.sleep"><tt class="xref py py-func docutils literal"><span class="pre">sleep()</span></tt></a> function is based on the
<a class="reference external" href="http://linux.die.net/man/3/nanosleep">nanosleep()</a>
system call. It is unclear whether this uses the same underlying counter as <cite>CLOCK_MONOTONIC</cite>.</p>
</div>
</div>
<div class="section" id="functions">
<h2><a class="toc-backref" href="#id7">Functions</a><a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="time-timemicros-and-timenanos">
<h3><a class="toc-backref" href="#id8">time(), timeMicros() and timeNanos()</a><a class="headerlink" href="#time-timemicros-and-timenanos" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dvbcss.monotonic_time.time">
<tt class="descclassname">dvbcss.monotonic_time.</tt><tt class="descname">time</tt><big>(</big><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/monotonic_time.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.monotonic_time.time" title="Permalink to this definition">¶</a></dt>
<dd><p>Return monotonic time in seconds and fractions of seconds (as a float). The precision is operating system dependent.</p>
</dd></dl>

<dl class="function">
<dt id="dvbcss.monotonic_time.timeMicros">
<tt class="descclassname">dvbcss.monotonic_time.</tt><tt class="descname">timeMicros</tt><big>(</big><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/monotonic_time.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.monotonic_time.timeMicros" title="Permalink to this definition">¶</a></dt>
<dd><p>Return monotonic time in integer microseconds. The precision is operating system dependent.</p>
</dd></dl>

<dl class="function">
<dt id="dvbcss.monotonic_time.timeNanos">
<tt class="descclassname">dvbcss.monotonic_time.</tt><tt class="descname">timeNanos</tt><big>(</big><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/monotonic_time.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.monotonic_time.timeNanos" title="Permalink to this definition">¶</a></dt>
<dd><p>Return monotonic time in integer nanoseconds. The precision is operating system dependent.</p>
</dd></dl>

</div>
<div class="section" id="sleep">
<h3><a class="toc-backref" href="#id9">sleep()</a><a class="headerlink" href="#sleep" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dvbcss.monotonic_time.sleep">
<tt class="descclassname">dvbcss.monotonic_time.</tt><tt class="descname">sleep</tt><big>(</big><em>t</em><big>)</big><a class="reference external" href="https://github.com/BBC/pydvbcss/tree/master/dvbcss/monotonic_time.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#dvbcss.monotonic_time.sleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Sleep for specified number of second and fractions of seconds (as a float).  The precision is operating system dependent.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Throws TimeoutError:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">if the underlying system call used to sleep reported a timeout (OS dependent behaviour)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Throws InterruptedException:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">if a signal or other interruption is received while sleeping (OS dependent behaviour)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For all supported operating systems, the sleep() function is not guaranteed
to use the same underlying timer as the time() and therefore should be
considered inaccurate.</p>
</div>
</dd></dl>

</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="clock.html" class="btn btn-neutral float-right" title="Synthesised clocks (dvbcss.clock)"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="timing.html" class="btn btn-neutral" title="Clocks, Time and Scheduling modules"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, British Broadcasting Corporation.
      Last updated on Mar 17, 2015.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2-release',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>